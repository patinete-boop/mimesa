<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Prueba URL de Login Spotify</title>
</head>
<body>
  <h1>Prueba de construcción de URL</h1>
  <button id="loginBtn">Generar URL de login</button>
  <pre id="output"></pre>

  <script>
    const CLIENT_ID = "f0bf147de2084f78b676c0fb89482fee";
    const REDIRECT_URI = "https://patinete-boop.github.io/mimesa/callback";

    const SCOPES = [
      "streaming",
      "user-read-email",
      "user-read-private",
      "user-read-playback-state",
      "user-modify-playback-state",
      "playlist-read-private"
    ].join(" ");

    function getAuthURL() {
      const auth = new URL("https://accounts.spotify.com/authorize");
      auth.searchParams.set("client_id", CLIENT_ID);
      auth.searchParams.set("response_type", "token");
      auth.searchParams.set("redirect_uri", REDIRECT_URI);
      auth.searchParams.set("scope", SCOPES);
      auth.searchParams.set("show_dialog", "true"); // <- aquí debe aparecer
      return auth.toString();
    }

    document.getElementById("loginBtn").addEventListener("click", () => {
      const url = getAuthURL();
      document.getElementById("output").textContent = url;
    });
  </script>
</body>
</html>
